---
title: Building Semantic Model Report
echo: false
---

validation reports
```{python}
import pandas as pd
pd.set_option('display.max_rows', 100)
pd.set_option('display.max_colwidth', 30)

def query_table(store, query):
    _ = store.query(query)
    from mapping.utils.tables import query_table as qt
    _ = qt(_)
    return _

def validation(store, filter=True):
    from mapping.utils.queries import queries
    from mapping.utils.tables import query_table
    _ = store.query(queries.shacl_report)
    _ = query_table(_)
    if filter:
        mdq = set()
        for q in {
            queries.rules.mapped,
            #queries.rules.rdfs_inferred,
            #queries.rules.shacl_inferred
            }:
            md = store.query(q)
            md = tuple(md)
            from itertools import chain
            md = chain((t[0] for t in md), (t[2] for t in md))
            md = (_.value for _ in md)
            mdq.update(md)
        _ = _[_['focusNode'].isin(mdq)]
    return _

from project import root
import pyoxigraph as og
store = og.Store('../db')
validation(store).to_dict(orient='records')
```





Physical Space Count 

```{python}
q = """
PREFIX s223: <http://data.ashrae.org/standard223#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
 
SELECT (COUNT (?ps) AS ?roomcount) 

WHERE 
   {?ps a s223:PhysicalSpace.
}

"""
query_table(store, q)
```

Lighting Domain Space Count

```{python}
q = """
PREFIX s223: <http://data.ashrae.org/standard223#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
 
SELECT  (COUNT (?ds) AS ?lightingdomainspacecount)

WHERE 
   {?ds a s223:DomainSpace.
    ?ds s223:hasDomain s223:Domain-Lighting.
   }

"""
query_table(store, q)
```

HVAC Domain Space Count

```{python}
q = """
PREFIX s223: <http://data.ashrae.org/standard223#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
 
SELECT  (COUNT (?ds) AS ?HVACdomainspacecount)

WHERE 
   {?ds a s223:DomainSpace.
   ?ds s223:hasDomain s223:Domain-HVAC.
   }

"""
query_table(store, q)
```

Lighting Zone Count

```{python}
q = """
PREFIX s223: <http://data.ashrae.org/standard223#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
 
SELECT   (COUNT (?z) AS ?lightingzonecount)

WHERE 
   {?z a s223:Zone.
   ?z s223:hasDomain s223:Domain-Lighting.
 } 


"""
query_table(store, q)
```

HVAC Zone Count

```{python}
q = """
PREFIX s223: <http://data.ashrae.org/standard223#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
 
SELECT  (COUNT (?z) AS ?HVACzonecount)

WHERE 
   {?z a s223:Zone.
    ?z s223:hasDomain s223:Domain-HVAC.
 } 


"""
query_table(store, q)
```

Luminaire Count

```{python}
q = """
PREFIX s223: <http://data.ashrae.org/standard223#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
 
SELECT  (COUNT (?l) AS ?luminairecount)

WHERE 
   {?l a s223:Luminaire.
   
  
 } 


"""
query_table(store, q)
```

Electric Breaker Count

```{python}
q = """
PREFIX s223: <http://data.ashrae.org/standard223#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
 
SELECT  (COUNT (?e) AS ?electricbreakercount)

WHERE 
   {?e a s223:ElectricBreaker.
  
  
 } 


"""
query_table(store, q)
```

Occupancy Sensor Count

```{python}
q = """
PREFIX s223: <http://data.ashrae.org/standard223#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
 
SELECT (COUNT (?e) AS ?occupantsensorcount)

WHERE 
   {?o a s223:OccupantMotionSensor.
   
  
 } 


"""
query_table(store, q)
```