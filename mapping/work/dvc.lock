schema: '2.0'
stages:
  ontology:
    cmd: python -m mapping.engine ontology -i False -d 'ontology' -o ontology.ttl
    deps:
    - path: ../../ontologies/.ontoenv
      hash: md5
      md5: 30ee0c30e91a33dc025cc5eee57d2692.dir
      size: 355632
      nfiles: 9
    outs:
    - path: ontology.ttl
      hash: md5
      md5: 80d84193e28b69953414fc5004dfc039
      size: 5633025
  map:
    cmd: python tasks.py map params.yaml
    deps:
    - path: ../rules
      hash: md5
      md5: 50f7615165f5960b3c8b2c71f4c83d7f.dir
      size: 23627
      nfiles: 25
    - path: ontology.ttl
      hash: md5
      md5: 80d84193e28b69953414fc5004dfc039
      size: 5633025
    params:
      params.yaml:
        run.building: Pritoni
        run.variation: default
    outs:
    - path: db
      hash: md5
      md5: d6807e06f3de4db7b56effbca7532dcc.dir
      size: 152937009
      nfiles: 149
  report:
    cmd: quarto render report.qmd
    deps:
    - path: ../db
      hash: md5
      md5: 6cd8b88f5216c3e4c7942ba63e65bee3.dir
      size: 153001158
      nfiles: 151
    - path: report.qmd
      hash: md5
      md5: 8a922b96956b884b1966b4f7b54e013b
      size: 3422
    params:
      ../params.yaml:
        run.building: Pritoni
        run.variation: default
    outs:
    - path: report.html
      hash: md5
      md5: ef2b61e2b8de7850cb653903f236b03b
      size: 20777
    - path: report_files
      hash: md5
      md5: 80af602566cbafc1af81a45b24e4ec82.dir
      size: 843856
      nfiles: 11
  distribution:
    cmd: python distribution.py extract_triples db mapped shacl_inferred --replace_bdgprefix
      True -o mapped_plus_inferred.ttl
    deps:
    - path: db
      hash: md5
      md5: 919bc96585173e3502f8c95373dd867f.dir
      size: 2153012641
      nfiles: 164
    outs:
    - path: mapped_plus_inferred.ttl
      hash: md5
      md5: 6bdd705950ecc9721e1cbd5e8ea9afd9
      size: 2297926
  upload_report_sharefolder:
    cmd: python tasks.py copy_to_sharefolder report --dst_sharefolder Pritoni/default/report
      --delete_dst=True
    deps:
    - path: report
      hash: md5
      md5: d230c17b2a8736892f229217b9d7e91e.dir
      size: 868055
      nfiles: 13
  mapped_ttl:
    cmd: python tasks.py extract_triples db mapped --replace_bdgprefix True -o mapped.ttl
    deps:
    - path: db
      hash: md5
      md5: a2eae8be957bd83beb61d52e0189b71a.dir
      size: 153108930
      nfiles: 153
    params:
      params.yaml:
        run.building: Pritoni
        run.variation: default
    outs:
    - path: mapped.ttl
      hash: md5
      md5: 3673c01712617dd554ebf8c154b6b906
      size: 37245
  mapped_plus_inferred_ttl:
    cmd: python tasks.py extract_triples db mapped shacl_inferred --replace_bdgprefix
      True -o mapped_plus_inferred.ttl
    deps:
    - path: db
      hash: md5
      md5: 87a537038b63b49e9dfc7981adf0eca6.dir
      size: 153216723
      nfiles: 155
    params:
      params.yaml:
        run.building: Pritoni
        run.variation: default
    outs:
    - path: mapped_plus_inferred.ttl
      hash: md5
      md5: c3d6910667771850be6a02e72f607c78
      size: 66901
  upload_ttls_sharefolder:
    cmd: python tasks.py copy_to_sharefolder mapped_plus_inferred.ttl mapped.ttl --dst_sharefolder
      Pritoni/default --delete_dst=False
    deps:
    - path: mapped.ttl
      hash: md5
      md5: 3673c01712617dd554ebf8c154b6b906
      size: 37245
    - path: mapped_plus_inferred.ttl
      hash: md5
      md5: c3d6910667771850be6a02e72f607c78
      size: 66901
