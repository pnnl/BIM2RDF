schema: '2.0'
stages:
  ontology:
    cmd: python -m mapping.engine ontology -i False -d 'ontology' -o ontology.ttl
    deps:
    - path: ../../ontologies/.ontoenv
      hash: md5
      md5: 30ee0c30e91a33dc025cc5eee57d2692.dir
      size: 355632
      nfiles: 9
    outs:
    - path: ontology.ttl
      hash: md5
      md5: 80d84193e28b69953414fc5004dfc039
      size: 5633025
  map:
    cmd: python tasks.py map params.yaml
    deps:
    - path: ../rules
      hash: md5
      md5: 675c4af3c279e3425ebac0384b06c212.dir
      size: 23645
      nfiles: 25
    - path: ontology.ttl
      hash: md5
      md5: 80d84193e28b69953414fc5004dfc039
      size: 5633025
    params:
      params.yaml:
        run.building: lbnl-bldg59
        run.variation: default
    outs:
    - path: db
      hash: md5
      md5: ecf1b080f1c879560acf08bbb634d380.dir
      size: 2090281901
      nfiles: 184
  report:
    cmd: quarto render report.qmd
    deps:
    - path: ../db
      hash: md5
      md5: 05371edc36f9dd258c9ac8c37a6cf460.dir
      size: 2090260767
      nfiles: 186
    - path: report.qmd
      hash: md5
      md5: 8a922b96956b884b1966b4f7b54e013b
      size: 3422
    params:
      ../params.yaml:
        run.building: lbnl-bldg59
        run.variation: default
    outs:
    - path: report.html
      hash: md5
      md5: d0455d4e97d9c823605ebd8aa57b9ec8
      size: 15649
    - path: report_files
      hash: md5
      md5: b7a69793a4d3e2ce99b4abf23dd182e0.dir
      size: 686476
      nfiles: 11
  distribution:
    cmd: python distribution.py extract_triples db mapped shacl_inferred --replace_bdgprefix
      True -o mapped_plus_inferred.ttl
    deps:
    - path: db
      hash: md5
      md5: 919bc96585173e3502f8c95373dd867f.dir
      size: 2153012641
      nfiles: 164
    outs:
    - path: mapped_plus_inferred.ttl
      hash: md5
      md5: 6bdd705950ecc9721e1cbd5e8ea9afd9
      size: 2297926
  upload_report_sharefolder:
    cmd: python tasks.py copy_to_sharefolder report --dst_sharefolder lbnl-bldg59/default/report
      --delete_dst=True
    deps:
    - path: report
      hash: md5
      md5: e24f2221a608f634e884858a444748ff.dir
      size: 705547
      nfiles: 13
  mapped_ttl:
    cmd: python tasks.py extract_triples db mapped --replace_bdgprefix True -o mapped.ttl
    deps:
    - path: db
      hash: md5
      md5: de632fe1960d92cd05b3ac2b0b820948.dir
      size: 2090368540
      nfiles: 188
    params:
      params.yaml:
        run.building: lbnl-bldg59
        run.variation: default
    outs:
    - path: mapped.ttl
      hash: md5
      md5: 693ae4dff651afecb3d1198cc8c5c9cb
      size: 1620936
  mapped_plus_inferred_ttl:
    cmd: python tasks.py extract_triples db mapped shacl_inferred --replace_bdgprefix
      True -o mapped_plus_inferred.ttl
    deps:
    - path: db
      hash: md5
      md5: 1bc1ab8a6faaf32af58444c53633de90.dir
      size: 2090476334
      nfiles: 190
    params:
      params.yaml:
        run.building: lbnl-bldg59
        run.variation: default
    outs:
    - path: mapped_plus_inferred.ttl
      hash: md5
      md5: 71799dd584ebd59ad6faf51e39fc870c
      size: 3294135
  upload_ttls_sharefolder:
    cmd: python tasks.py copy_to_sharefolder mapped_plus_inferred.ttl mapped.ttl --dst_sharefolder
      lbnl-bldg59/default --delete_dst=False
    deps:
    - path: mapped.ttl
      hash: md5
      md5: 693ae4dff651afecb3d1198cc8c5c9cb
      size: 1620936
    - path: mapped_plus_inferred.ttl
      hash: md5
      md5: 71799dd584ebd59ad6faf51e39fc870c
      size: 3294135
