schema: '2.0'
stages:
  map:
    cmd: mapping-run-in  python -m mapping.speckle --semantics=True --stream_id=Pritoni
    deps:
    - path: ../../ontologies/imported/223p.ttl
      md5: 22426b32b5ee9c991c18ea02043f4c2e
      size: 6927431
    outs:
    - path: out.ttl
      md5: bac83720901e4abeb41386b3bfc829a0
      size: 2094251
  upload_ontology:
    cmd: mapping-run-in inv graphdb.upload-graph --ttl ontology.ttl --name brick
    deps:
    - path: ontology.ttl
      md5: beb7b350bb20989d33ed1388b1bde35e
      size: 851853
  upload_data:
    cmd: graphdb-run-in python -m graphdb.tasks upload_graph out.ttl --delete=True  --name
      Pritoni
    deps:
    - path: out.ttl
      md5: bac83720901e4abeb41386b3bfc829a0
      size: 2094251
  infer:
    cmd: mapping-run-in python -X utf8 owlrl_patch.py --input_syntax=turtle --maximal
      --owlrl=yes --rdfs=yes --extras=yes --axioms=yes --serialization=turtle mapped.ttl  ontology.ttl
      > inferred.ttl
    deps:
    - path: mapped.ttl
      md5: 8550273359000692616534088923f780
      size: 1701475
    - path: ontology.ttl
      md5: beb7b350bb20989d33ed1388b1bde35e
      size: 851853
    outs:
    - path: inferred.ttl
      md5: 30c9997683f08ba1dd62b69453868641
      size: 5209324
  validate:
    cmd: mapping-run-in python pyshacl_err.py --shacl ../../test/proto-medoffice.ttl  -f
      turtle --iterate-rules --advanced -o validation.ttl  inferred.ttl
    deps:
    - path: ../../test/proto-medoffice.ttl
      md5: 4cc113962c8b1f99aa34d5a212282843
      size: 3500
    - path: inferred.ttl
      md5: 30c9997683f08ba1dd62b69453868641
      size: 5209324
    outs:
    - path: validation.ttl
      md5: 7aa4692047e43fff72291148daaf2975
      size: 153
  ontologies:
    cmd: ontologies-run-in dvc repro
    deps:
    - path: ../ontologies
      md5: 1c6d1de47270bfad7d6188fc7d1ceef4.dir
      size: 290181535
      nfiles: 670
