schema: '2.0'
stages:
  map:
    cmd: mapping-run-in inv map --db-file ../input/buildings/proto-medoffice.sqlite
      --map-file ../input/mappings/brick/proto-medoffice/maps.yaml  --ontology brick
    deps:
    - path: ../../ontologies/brick
      md5: 34c159305303170809cbe3ba04da6a5c.dir
      size: 726355
      nfiles: 1
    - path: ../input/buildings/proto-medoffice.sqlite
      md5: 433fdd076c6058a8153cbb8ea22ebe70
      size: 2306048
    - path: ../input/mappings/brick/proto-medoffice/maps.yaml
      md5: b138c9edc545dcbc83a36f228c3d5ebf
      size: 5046
    outs:
    - path: log
      md5: 70420ddd9aa84859a6ceb0f01733100c.dir
      size: 0
      nfiles: 1
    - path: mapped.ttl
      md5: 8550273359000692616534088923f780
      size: 1701475
    - path: ontology.ttl
      md5: beb7b350bb20989d33ed1388b1bde35e
      size: 851853
  upload_ontology:
    cmd: mapping-run-in inv graphdb.upload-graph --ttl ontology.ttl --name brick
    deps:
    - path: ontology.ttl
      md5: beb7b350bb20989d33ed1388b1bde35e
      size: 851853
  upload_data:
    cmd: mapping-run-in inv graphdb.upload-graph --ttl mapped.ttl  --name proto-medoffice
    deps:
    - path: mapped.ttl
      md5: 8550273359000692616534088923f780
      size: 1701475
  infer:
    cmd: mapping-run-in python -X utf8 owlrl_patch.py --input_syntax=turtle --maximal
      --owlrl=yes --rdfs=yes --extras=yes --axioms=yes --serialization=turtle mapped.ttl  ontology.ttl
      > inferred.ttl
    deps:
    - path: mapped.ttl
      md5: 8550273359000692616534088923f780
      size: 1701475
    - path: ontology.ttl
      md5: beb7b350bb20989d33ed1388b1bde35e
      size: 851853
    outs:
    - path: inferred.ttl
      md5: 30c9997683f08ba1dd62b69453868641
      size: 5209324
  validate:
    cmd: mapping-run-in python pyshacl_err.py --shacl ../../test/proto-medoffice.ttl  -f
      turtle --iterate-rules --advanced -o validation.ttl  inferred.ttl
    deps:
    - path: ../../test/proto-medoffice.ttl
      md5: d41d8cd98f00b204e9800998ecf8427e
      size: 0
    - path: inferred.ttl
      md5: 30c9997683f08ba1dd62b69453868641
      size: 5209324
    outs:
    - path: validation.ttl
      md5: d85b64c7337ebf6a86256e355272e1e5
      size: 156
